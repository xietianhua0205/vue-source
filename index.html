<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="app" title="test" style="color: red;font-size: 20px">{{ msg.a }}-{{ arr }}</div>
<!--<script src="src/compile/test.js"></script>-->
<script src="dist/vue.js"></script>
<script>
    // umd Vue
    // console.log(Vue)
    // 响应式, vue2， mvvm
    // Vue.mixin({})
    Vue.Mixin({  // 全局的方法
        created() {
            console.log(this.name)
            console.log('a----1')
        }
    })
    Vue.Mixin({  // 全局的方法
        created() {
        }
    })

    let vm = new Vue({
        el: '#app',
        // data: {},
        data() {
            return {
                msg: {a: 1},
                name: '张三',
                arr: [1, 2, 3]
            }
        },
        props: {},
        watch: {},
        methods: {},
        created() {
            console.log('created')
        },
        update() {
            console.log('数据更新了！')
        }
    })
    setTimeout(() => { // 数据更新多次, 渲染只需要一次， 通过异步来处理; nextTick()
        vm.arr.push(2)
        vm.arr.push(3)
        vm.arr.push(4)
        vm.$nextTick(() => {
            console.log(vm.$el.innerHTML)
        })
    }, 2000)
    // setTimeout(() => {
    //     vm.msg = '张三'
    // }, 3000)
    // setTimeout(() => {
    //     vm.name = '王麻子'
    // }, 6000)

    // 问题  自动跟新
    // 1.数据变化，自动更新视图
    // 2. vue中更新组组件策略是: 以组件为单位，给每一个组件 添加 一个 watcher,属性变化 调用 watcher

    // 二实现对象收集依赖
    // dep 和 watch 关系 多对多 （为计算属性作铺垫）

    // 三. 数组依赖收集
    // 思路：
    // 1. 我们要给所有的对象类型增加一个 dep []
    // 2. 获取数组值，会调用 get 方法，希望让当前的数组记住这个渲染的watcher
    // 2.1  需要获取当前的dep
    // 2，2 当前面对数组取值的时候，我们将让数组的dep记住这个watcher
    // 2.3  我们获取更新数组的时候调用 push shift 等等这些方法的时候，找到我们的watcher进行更新。


    // vue 初次渲染流程 =》1 初始化数据 =》 2.模板编译 =》 变成 render()=> 生成虚拟节点=》 变成真实Dom=》放到页面

    // vue 模板编译  template render  el 注意: el(必须要有), 先走 render（） 再走 template， 生命周期图

    // vue 生命周期  实现原理  源码实现总结
    // (1) Vue.minix({}) // 混入  (2) 设计模式 订阅发布模式  vue  options:{data:[],watch:[]}
</script>
</body>
</html>
